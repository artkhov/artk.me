+++
title = "PostgreSQL 12. Заметки."
description = "Установка и настройка PostgreSQL 13 на Ubuntu 21.04"
date = 2021-05-13T12:29:42+03:00
draft = false
tags = [
"postgres",
"postgresql",
"psql",
"СУБД"
]
categories = [
"базы данных"
]
slug = "postgresql_database_intro"
+++

За последние несколько лет мне ни разу не приходилось устанавливать postgres ни локально, ни на выделенном сервере.
Виной всему наверное облачные managed базы данных.
Все настройки за тебя делает DevOps или web UI, который берет на себя всю работу по развертыванию и настройке.

Но иногда хочется, чтобы БД была под рукой, в таких случаях postgres можно развернуть локально.
Для таких случаев я и пишу эту заметку, чтобы в случае чего можно было обратиться к ней, а не искать в гугле.
<!--more-->

##### Установка
Для начала стоит обновить индексы в пакетном менеджере
```shell
sudo apt update
```

После чего устанавливаем
```shell
sudo apt install postgresql postgresql-contrib
# postgresql-contrib - это некоторые расширения для нашего postgresql
```

Выполним команду, чтобы убедится что наш сервер БД запущен.
```shell
systemctl status postgresql
```
<img src="/img/postgres_notes/postgres_status.png" width="600">

##### Настройка сервера баз данных
PostgreSQL поставляется с программой psql - консольный клиент для нашего сервера,
а так же в систему автоматически добавляется пользователь *postgres*
С помощью этого пользователя мы и будем производить дальнейшие настройки.
```shell
sudo -u postgres psql
```

Создадим новую базу данных
```sql
CREATE DATABASE test_db;
```

Создадим новую учетку для доступа к нашей базе данных *test_db*
```sql
CREATE USER user123 WITH PASSWORD '123';
```

Добавляем прав нашему пользователю *user123*
```sql
GRANT ALL PRIVILEGES ON DATABASE test_db TO user123;
```
На этом базовые настройки завершены, этого вполне хватит для тестовой БД на которой ведется разработка.

##### Основные команды psql
Зайдя в консоль *psql* вы можете получить список всех доступных команд с помощью оператора **\\?**
В большинстве случаев нас интересуют:
> **\du** - Получить список пользователей и их привилегии
> **\l**  - Получить список БД
> **\d**  - После подключения к конкретной БД (use \<database\>;) вывести список таблиц
> **\q**  - Выход из psql :)